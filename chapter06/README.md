# 6장. 인터럽트 후반부 처리
- 인터럽트 후반부 기법은 왜 적용하고 무엇이 있는가?

### 인터럽트 후반부 기법을 적용하는 이유
- 디바이스 드라이버에서는 다음과 같은 요구 사항이 생김
	- 인터럽트가 발생한 후 처리해야 할 동작이 많을 때가 있다.
	- 인터럽트 핸들러는 빨리 실행돼야 한다.
- 대안으로 인터럽트 발생했을 때 인터럽트를 처리할 코드를 2단계로 분리
	- 빨리 실행할 코드: 인터럽트 핸들러 및 인터럽트 컨텍스트에서 실행
	- 실시간으로 빨리 실행되지 않아도 되는 코드: 인터럽트 후반부 기법 적용

### 인터럽트 후반부 처리 기법
- IRQ 스레드
- Soft IRQ
- 태스크릿
- 워크 큐

### 인터럽트 컨텍스트에서 많은 일을 하면 어떻게 될까?
- 인터럽트 핸들러에서 실행시간이 길다면
	- 오동작
	- 커널 크래시
- 실행 시간이 오래 걸리는 코드
	- I/O시작
	- 과도한 while 반복문
	- 유저 공간으로 uevent를 전달해서 인터럽트 발생 알림
	- 스케줄링 지원하는 커널 함수 호출
	
###  Top Half / Bottom Halfo
- Top Half
	- 인터럽트가 발생한 후 빨리 처리해야 하는 일
	- 인터럽트 핸들러에서 최소한의 연산 수행
- Bottom Half
	- 인터럽트 처리를 프로세스 레벨에서 수행하는 방식
	- 인터럽트 후반부 기법으로 처리
	- Top Half 부분의 인터럽트 핸들러는 최소한의 일을 수행하고 약간 지연되어 처리되어도 상관 없는 부분은 Bottom Half에서 처리
- 리눅스 커널에서 지원하는 인터럽트 후반부(Bottom Half)기법
	- IRQ 스레드, Soft IRQ, 태스크릿, 워크 큐
